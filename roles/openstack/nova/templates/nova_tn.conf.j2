[DEFAULT]
my_ip = {{ inventory_hostname }}
enabled_apis=osapi_compute,metadata
auth_strategy=keystone
allow_resize_to_same_host=true
resize_confirm_window=2
scheduler_default_filters=RetryFilter,AvailabilityZoneFilter,RamFilter,DiskFilter,ComputeFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter,ServerGroupAntiAffinityFilter,ServerGroupAffinityFilter

scheduler_weight_classes=nova.scheduler.weights.metrics.MetricsWeigher,nova.scheduler.weights.ram.RAMWeigher,nova.scheduler.weights.affinity.ServerGroupSoftAntiAffinityWeigher

firewall_driver=nova.virt.firewall.NoopFirewallDriver
linuxnet_interface_driver=nova.network.linux_net.LinuxOVSInterfaceDriver
security_group_api = neutron
use_neutron=true
rpc_backend=rabbit

network_api_class=nova.network.neutronv2.api.API

resume_guests_state_on_host_boot=true
api_rate_limit=false
osapi_max_limit=5000
running_deleted_instance_action=reap
cpu_allocation_ratio = 15.0
ram_allocation_ratio=2
reserved_host_memory_mb=2048
reserved_host_disk_mb=10240
service_down_time=120
rpc_response_timeout=300
multi_host=true
#auto_assign_floating_ip=true

log_dir = /var/log/nova
debug = True

instances_path = /opt/_data/openstack/data/nova/instances

[barbican]
[cache]
[cells]

[cinder]
os_region_name=RegionOne

[conductor]
[cors]
[cors.subdomain]

[database]
connection= mysql+pymysql://nova:nova@tn-mysql.xxxx.com/nova

[ephemeral_storage_encryption]

[glance]
api_servers=http://tn-glance.xxxx.com:9292
[guestfs]
[hyperv]
[image_file_url]
[ironic]
[keymgr]

[keystone_authtoken]
auth_uri=http://tn-keystone.xxxx.com:5000
auth_url=http://tn-keystone.xxxx.com:35357
memcached_servers=tn-mem.xxxx.com:11211
auth_type=password
project_domain_name = default
user_domain_name = default
project_name = service
username = nova
password = nova

[libvirt]
virt_type=kvm
cpu_mode = none
#inject_password=true
#inject_key=true
#inject_partition=-1
live_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE, VIR_MIGRATE_PEER2PEER, VIR_MIGRATE_LIVE, VIR_MIGRATE_TUNNELLED
disk_cachemodes = "network=writeback"
#images_type=rbd
#images_rbd_pool=test_pool
#images_rbd_ceph_conf = /etc/ceph/ceph.conf
#hw_disk_discard=unmap
#rbd_user=admin
#rbd_secret_uuid=41ee13fe-69ed-45d0-8f4b-e3c03f1a4ad5

[matchmaker_redis]
[metrics]

[neutron]
service_metadata_proxy=true
#metadata_proxy_shared_secret = 123qwe
url=http://tn-neutron.xxxx.com:9696
auth_url=http://tn-keystone.xxxx.com:35357
auth_type=password
project_domain_name = default
user_domain_name = default
region_name = RegionOne
project_name = service
username = neutron
password = neutron

[osapi_v21]

[oslo_concurrency]
lock_path=/var/lib/nova/tmp

[oslo_messaging_amqp]
[oslo_messaging_notifications]

[oslo_messaging_rabbit]
rabbit_hosts=controller1:5672,controller2:5672
rabbit_retry_interval=1
rabbit_retry_backoff=2
rabbit_max_retries=0
rabbit_durable_queues=true
rabbit_ha_queues=true
rabbit_userid = openstack
rabbit_password = 123qwe

[oslo_middleware]
[oslo_policy]
[rdp]
[serial_console]
[spice]
[ssl]
[trusted_computing]
[upgrade_levels]
[vmware]

[vnc]
enabled=true
keymap=en-us
vncserver_listen=0.0.0.0
vncserver_proxyclient_address=$my_ip
novncproxy_base_url=http://10.100.13.243:6080/vnc_auto.html

[workarounds]
[xenserver]
